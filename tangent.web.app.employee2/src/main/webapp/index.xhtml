<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>
	<h1>Employee System</h1>
	<h:form id="form">
            <p:growl id="msgs" showDetail="true" />

            <p:fieldset>
                <p:panelGrid id="employeeListGrid" columns="1">
                    <p:dataTable tableStyle="width:auto"
                                 id="employeeDT" 
                                 var="employee" 
                                 value="#{dtEmployeesView.employeeList}"
                                 rows="4"
                                 paginator="true"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="4,8">
                        <f:facet name="header">
                            Employees
                        </f:facet>
                        <p:column headerText="gitHub user name">
                            <h:outputText value="#{employee.githubUser}" />
                        </p:column>
                        <p:column headerText="email" >
                            <h:outputText value="#{employee.email}" />
                        </p:column>
                        <p:column headerText="Phone Number">
                            <h:outputText value="#{employee.phoneNumber}" />
                        </p:column>
                        <p:column headerText="Birth Date" >
                            <h:outputText value="#{employee.birthDate}">
                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                            </h:outputText>
                        </p:column> 
                        <p:column filterBy="#{employee.gender}" headerText="Gender" footerText="exact" filterMatchMode="exact">
                            <f:facet name="filter">
                                <p:selectOneMenu value="#{dtEmployeesView.employeeListFilter.gender}"
                                                 valueChangeListener="#{dtEmployeesView.filterEmployeeList}">
                                    <p:ajax update="employeeDT" 
                                            process="employeeDT"/>
                                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{dtEmployeesView.employeeListFilter.genderList}" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{employee.gender}" />
                        </p:column>                
                        <p:column headerText="Gender">
                            <h:outputText value="#{employee.gender}" />
                        </p:column>
                        <p:column headerText="Race">
                            <h:outputText value="#{employee.race}" />
                        </p:column>
                        <p:column headerText="Years Worked">
                            <h:outputText value="#{employee.yearsWorked}" />
                        </p:column>
                        <p:column headerText="Age">
                            <h:outputText value="#{employee.age}" />
                        </p:column>
                        <p:column headerText="Days to Birthday">
                            <h:outputText value="#{employee.daysToBirthday}" />
                        </p:column>
                        <p:column style="width:32px;text-align: center">
                             <p:commandButton update=":form:employeeDetail" oncomplete="PF('employeeDialog').show()" icon="ui-icon-search" title="Employee">
                                <f:setPropertyActionListener value="#{employee}" target="#{dtEmployeesView.selectedEmployee}" />
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:panelGrid>
            </p:fieldset>

            <p:dialog header="Employee Info" widgetVar="employeeDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <p:outputPanel id="employeeDetail" style="text-align:center;">
                    <p:panelGrid  columns="2" rendered="#{not empty dtEmployeesView.selectedEmployee}" columnClasses="label,value">
                        <h:outputText value="gitHub user name:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.githubUser}" />

                        <h:outputText value="email:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.email}" />

                        <h:outputText value="Phone Number:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.phoneNumber}" />

                        <h:outputText value="Birth Date" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.birthDate}">
                            <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                        </h:outputText>
                        
                        <h:outputText value="Gender:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.gender}" />
                        
                        <h:outputText value="Race:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.race}" />
                        
                        <h:outputText value="Years Worked:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.yearsWorked}" />
                        
                        <h:outputText value="Age:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.age}" />
                        
                        <h:outputText value="Days to Birthday:" />
                        <h:outputText value="#{dtEmployeesView.selectedEmployee.daysToBirthday}" />
                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>

</h:body>
</html>
